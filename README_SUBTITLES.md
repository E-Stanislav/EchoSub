# Генерация субтитров с Whisper

## Описание

Simple Player поддерживает автоматическую генерацию субтитров с помощью OpenAI Whisper. Функция позволяет создавать SRT файлы для любого аудио или видео контента.

## Как использовать

### 1. Открытие видео файла
- Запустите Simple Player
- Откройте видео файл через кнопку "Open File" или перетащите файл в окно

### 2. Генерация субтитров
- Нажмите кнопку **"Create Subtitles"** в интерфейсе
- Выберите модель Whisper (tiny, base, small, medium, large)
- Дождитесь завершения обработки
- Субтитры автоматически загрузятся и отобразятся поверх видео

### 3. Управление субтитрами
- **Показать/скрыть**: Кнопка "Subtitles" в интерфейсе
- **Размер текста**: Настройки в меню
- **Цвет текста**: Настройки в меню

## Настройки Whisper

### Доступ к настройкам
- Меню **Settings** → **Whisper Settings**
- Или через кнопку настроек в диалоге генерации субтитров

### Управление моделями
- **Скачать модель**: Выберите модель и нажмите "Download"
- **Удалить модель**: Нажмите "Delete" рядом с моделью
- **Выбрать модель по умолчанию**: Отметьте галочкой

### Параметры обработки
- **Язык**: Автоопределение или ручной выбор
- **Качество**: Зависит от выбранной модели
- **Время обработки**: Зависит от размера файла и модели

## Поддерживаемые форматы

### Входные форматы
- **Видео**: MP4, AVI, MOV, MKV, WebM, FLV, WMV
- **Аудио**: MP3, WAV, FLAC, M4A, AAC

### Выходные форматы
- **SRT** - стандартный формат субтитров
- Файл сохраняется как `имя_видео.srt`

### Настройки сегментации
- **Максимальная длина сегмента**: 10 секунд
- **Временные метки**: для каждого слова
- **Язык**: автоматическое определение

## Структура папок

```
SimplePlayer/
├── models/
│   └── whisper/
│       ├── ggml-base.bin      # Модель base
│       ├── ggml-small.bin     # Модель small
│       └── ggml-medium.bin    # Модель medium
├── build_simple/
│   └── bin/
│       └── simple_player.app/ # Приложение
└── run_simple_player.sh       # Скрипт запуска
```

## Управление моделями

### Доступные модели
- **tiny**: ~39 MB, быстрая, низкое качество
- **base**: ~74 MB, сбалансированная
- **small**: ~244 MB, хорошее качество
- **medium**: ~769 MB, высокое качество
- **large**: ~1550 MB, лучшее качество

### Удаление моделей
1. Откройте настройки Whisper
2. Нажмите **"Удалить"** рядом с моделью
3. Подтвердите удаление

## Устранение неполадок

### Ошибка "Whisper не найден"
```bash
# Установите Whisper
pip install openai-whisper

# Проверьте установку
whisper --version
```

### Ошибка "Модель не найдена"
1. Откройте настройки Whisper
2. Скачайте нужную модель
3. Убедитесь, что модель выбрана

### Медленная обработка
- Используйте модель меньшего размера (tiny, base)
- Закройте другие приложения
- Убедитесь в достаточном объеме RAM

### Проблемы с качеством
- Попробуйте модель большего размера
- Проверьте качество исходного аудио
- Убедитесь в правильном выборе языка

## Технические детали

### Используемые технологии
- **Whisper.cpp**: Оптимизированная реализация Whisper на C++
- **GGML**: Эффективная библиотека для машинного обучения
- **Qt6**: Пользовательский интерфейс

### Производительность
- **CPU**: Рекомендуется 4+ ядра
- **RAM**: Минимум 4GB, рекомендуется 8GB+
- **GPU**: Поддерживается Metal (macOS), CUDA (NVIDIA)

### Форматы моделей
- **GGML**: Оптимизированный формат для CPU
- **Квантизация**: Поддержка 4-bit и 8-bit квантизации
- **Размер**: От 39MB до 1.5GB в зависимости от модели

## Примеры использования

### Базовое использование
```bash
# Запуск приложения
./bin/simple_player

# Открытие файла с командной строки
./bin/simple_player video.mp4
```

### Автоматическая генерация
1. Откройте видео файл
2. Нажмите "Create Subtitles"
3. Выберите модель "base"
4. Дождитесь завершения
5. Субтитры автоматически отобразятся

### Пакетная обработка
```bash
# Скрипт для обработки нескольких файлов
for file in *.mp4; do
    ./bin/simple_player "$file"
    # Генерация субтитров через UI
done
```

## Лицензия

Whisper.cpp распространяется под лицензией MIT. См. файл LICENSE в папке tools/whisper.cpp/ для деталей. 