# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Drag-and-Drop –≤ EchoSub

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

Drag-and-drop –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ API –¥–ª—è Fyne 2.6.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API –¥–ª—è Fyne 2.6

**–ë—ã–ª–æ:**
```go
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è Fyne 2.6
w.SetOnDropped(func(e *fyne.DropEvent) {
    if len(e.URIs) > 0 {
        filePath := e.URIs[0].Path()
        mediaView.LoadMediaFile(filePath)
    }
})
```

**–°—Ç–∞–ª–æ:**
```go
// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è Fyne 2.6
w.SetOnDropped(func(pos fyne.Position, uris []fyne.URI) {
    if len(uris) > 0 {
        filePath := uris[0].Path()
        mediaView.LoadMediaFile(filePath)
    }
})
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

```go
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
ext := strings.ToLower(filepath.Ext(filePath))
if ext == "" {
    log.Printf("Skipping file without extension: %s", filePath)
    return
}

// –£–±–∏—Ä–∞–µ–º —Ç–æ—á–∫—É –∏–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
format := ext[1:]
if !media.IsSupportedFormat(format) {
    log.Printf("Unsupported format: %s", format)
    return
}
```

### 3. –£–ª—É—á—à–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤ `MediaView`:
- `ShowDragOverlay()` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä drag-and-drop
- `HideDragOverlay()` - —Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- `ShowDragOverlayValid()` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
./scripts/test_ffmpeg.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é drag-and-drop
./scripts/test_drag_drop.sh
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `./echosub`
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å `test_audio.mp3` –∏–ª–∏ `test_video.mp4` –≤ –æ–∫–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
4. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–∞–π–ª (.txt)

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

**–í–∏–¥–µ–æ:** MP4, MKV, MOV
**–ê—É–¥–∏–æ:** MP3, WAV, M4A, FLAC

## üîß –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

- `cmd/echosub/main.go` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω API drag-and-drop
- `internal/ui/media_view.go` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- `docs/FR-01_IMPROVEMENTS.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `scripts/test_drag_drop.sh` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç drag-and-drop

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

Drag-and-drop —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π API –¥–ª—è Fyne 2.6
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ 