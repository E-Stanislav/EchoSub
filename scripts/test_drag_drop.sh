#!/bin/bash

echo "=== Тестирование Drag-and-Drop для EchoSub ==="

# Проверяем наличие тестовых файлов
echo "1. Проверка тестовых файлов..."

if [ ! -f "test_audio.mp3" ]; then
    echo "❌ test_audio.mp3 не найден. Запустите test_ffmpeg.sh сначала."
    exit 1
fi

if [ ! -f "test_video.mp4" ]; then
    echo "❌ test_video.mp4 не найден. Запустите test_ffmpeg.sh сначала."
    exit 1
fi

echo "✓ Тестовые файлы найдены"

# Проверяем наличие скомпилированного приложения
echo "2. Проверка скомпилированного приложения..."

if [ ! -f "echosub" ]; then
    echo "❌ echosub не найден. Скомпилируйте приложение: go build -o echosub ./cmd/echosub"
    exit 1
fi

echo "✓ Приложение найдено"

# Инструкции для тестирования
echo ""
echo "=== Инструкции для тестирования Drag-and-Drop ==="
echo ""
echo "1. Запустите приложение:"
echo "   ./echosub"
echo ""
echo "2. Перетащите один из тестовых файлов в окно приложения:"
echo "   - test_audio.mp3 (аудио файл)"
echo "   - test_video.mp4 (видео файл)"
echo ""
echo "3. Проверьте, что:"
echo "   - Файл загружается без ошибок"
echo "   - Отображается информация о файле"
echo "   - Для видео показывается превью"
echo "   - Для аудио генерируется волнограмма"
echo ""
echo "4. Попробуйте перетащить неподдерживаемый файл (например, .txt):"
echo "   - Должен быть проигнорирован"
echo "   - В логах должно появиться сообщение об ошибке"
echo ""
echo "=== Готово к тестированию! ===" 